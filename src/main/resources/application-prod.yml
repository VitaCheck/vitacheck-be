# application-prod.yml (최종 수정본)
spring:
  cloud:
    aws:
      s3:
        bucket: vitacheck-assets
      region:
        static: ap-northeast-2
      stack:
        auto: false
  config:
    import: "aws-secretsmanager:vitacheck/prod"
  datasource:
    url: jdbc:mysql://${PROD_DB_ENDPOINT}:3306/vitacheck?useSSL=false&serverTimezone=UTC&characterEncoding=UTF-8
    username: ${PROD_DB_USERNAME}
    password: ${PROD_DB_PASSWORD}

  security:
    oauth2:
      client:
        registration:
          google:
            client-id: ${GOOGLE_CLIENT_ID}
            client-secret: ${GOOGLE_CLIENT_SECRET}
            scope:
              - email
              - profile
              - openid
              - https://www.googleapis.com/auth/user.birthday.read
              - https://www.googleapis.com/auth/user.gender.read
          naver:
            client-id: ${NAVER_CLIENT_ID}
            client-secret: ${NAVER_CLIENT_SECRET}
            redirect-uri: "{baseUrl}/login/oauth2/code/{registrationId}"
            authorization-grant-type: authorization_code
            scope:
              - name
              - email
              - gender
              - birthday
            client-name: Naver
        provider:
          naver:
            authorization-uri: https://nid.naver.com/oauth2.0/authorize
            token-uri: https://nid.naver.com/oauth2.0/token
            user-info-uri: https://openapi.naver.com/v1/nid/me
            user-name-attribute: response
  jpa:
    hibernate:
      ddl-auto: none
      
  data:
    redis:
      host: localhost     # EC2 내부 Redis
      port: 6379
      password: ${REDIS_PASSWORD}  # 환경변수 또는 Secrets Manager 값

jwt:
  secret: ${JWT_SECRET}
  access-token-expiration-minutes: 30
  refresh-token-expiration-days: 14

open-api:
  food-safety-korea:
    api-key: ${FOOD_SAFETY_API_KEY}

# Firebase 키 설정을 위한 부분 (Secrets Manager에서 값을 가져옴)
firebase:
  key-json: ${firebase.key-json}

oauth2:
  redirect:
    frontend-url: https://vitachecking.com

server:
  forward-headers-strategy: framework

vertex:
  api:
    url: "https://us-central1-aiplatform.googleapis.com/v1/projects/vitacheck-464904/locations/us-central1/publishers/google/models/gemini-2.5-flash:generateContent"

logging:
  level:
    org.hibernate.SQL: DEBUG # 실행되는 SQL 쿼리 로그 출력
    org.hibernate.type.descriptor.sql: TRACE # SQL 바인딩 파라미터 로그 출력 ( ? 에 들어가는 값 확인)
    com.vitacheck.Notification.service: DEBUG # 알림 관련 서비스 로깅 레벨 상세 설정 (이미 추가한 로그 확인용)